<div class="row">
  <div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title card_title_cus">Profile Update</h4>
        <form class="forms-sample" action="/wdtls/editprofile" method="post" enctype="multipart/form-data">
          <input type="hidden" class="form-control"  name="id" value="<%= usersd.id %>" >
          <div class="row">
             <!-- LEFT SIDE (Two fields merged height) -->
             <div class="col-md-6">
                <div id="leftHeightBox">
                    <div class="form-group">
                        <label>User Mobile (user ID)<span class="red">*</span></label>
                        <input type="text" class="form-control" name="user_id" value="<%= usersd.user_id %>" readonly>
                    </div>

                    <div class="form-group">
                        <label>User Name<span class="red">*</span></label>
                        <input type="text" class="form-control" name="user_name" value="<%= usersd.user_name %>" required>
                    </div>

                       <div class="form-group">
                       <p>Do you want to participate in the election?</p>
    <label>
      
        <input type="radio" 
               name="elec_status" 
               value="1" 
               <%= usersd.elec_status == 1 ? 'checked' : '' %> 
               required>
        Yes
    </label>

    <label style="margin-left:20px;">
        <input type="radio" 
               name="elec_status" 
               value="0" 
               <%= usersd.elec_status == 0 ? 'checked' : '' %> 
               required>
        No
    </label>
                    </div>

                </div>
            </div>

            <!-- RIGHT SIDE -->
          <div class="col-md-6">
                <div class="form-group">
                        <label>Profile Picture</label>
                        <!-- Container -->
                        <div>
                        <!-- Preview Box on Top -->
                        <div id="previewBox" style="
                            width: 30%;
                          height: 150px;        /* set your desired height */
                          border: 1px solid #ccc;
                          border-radius: 6px;
                          overflow: hidden;
                          margin-bottom: 10px;">
                          <img id="previewImage"
                            src="<%= usersd.profile_pic ? '/uploads/profile_pic/' + usersd.profile_pic : '' %>"
                            style="width: 100%; height: 100%; object-fit: cover; display:<%= usersd.profile_pic ? 'block' : 'none' %>">
                        </div>

                    <!-- Browse Button Below -->
                      <br>
                      <input type="file" class="form-control" id="profilePic" name="profile_pic" accept="image/*" style="width:150px">
                      <input type="hidden" class="form-control"  name="old_profile_pic" value="<%= usersd.profile_pic %>" >
                    </div>
              </div>
          </div>
        </div>
            
          <button type="submit" class="btn btn-primary mr-2" id="submit">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  $(document).ready(function() {
    '<% if (success_msg.length > 0) { %>'
        toastr.success('<%= success_msg %>');
    '<% } %>'
  });
</script>

<script>
  document.getElementById('profilePic').addEventListener('change', function (event) {
      const file = event.target.files[0];
      if (file) {
          const preview = document.getElementById('previewImage');
          preview.src = URL.createObjectURL(file);
          preview.style.display = "block";
      }
  });
</script>

