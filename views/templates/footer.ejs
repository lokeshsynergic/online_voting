<!-- partial:partials/_footer.html -->
<footer class="footer">
    <div class="d-sm-flex justify-content-center justify-content-sm-between">
        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2025  West Bengal Co-operative Officers' Association (Online Voting)</span>
    </div>
</footer>

<script>
    function confirmDelete(event) {
        if (!confirm("Are you sure you want to delete this item?")) {
            event.preventDefault(); // Prevent the default action (e.g., form submission)
        }
    }
    function confirmapprove(event) {
        if (!confirm("Are you sure you want to Approve this Society?")) {
            event.preventDefault(); // Prevent the default action (e.g., form submission)
        }
    }
    function confirmapprove_(event) {
        if (!confirm("Are you sure you want to Approve this?")) {
            event.preventDefault(); // Prevent the default action (e.g., form submission)
        }
    }
    toastr.options = {
    "closeButton": true,
    "debug": false,
    "newestOnTop": true,
    "progressBar": true,
    "positionClass": "toast-top-center", // Set the initial position
    "preventDuplicates": false,
    "onclick": null,
    "showDuration": "300",
    "hideDuration": "1000",
    "timeOut": "5000", // Toast will disappear after 5 seconds
    "extendedTimeOut": "1000",
    "showEasing": "swing",
    "hideEasing": "linear",
    "showMethod": "fadeIn",
    "hideMethod": "fadeOut"
};

$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
  });
  $(document).ready(function() {
         /// Test is going on   
                '<% if (error_msg.length > 0) { %>'
                toastr.error('<%= error_msg %>');
            '<% } %>'

            '<% if (success_msg.length > 0) { %>'
                    toastr.success('<%= success_msg %>');
            '<% } %>'
  });

</script>

<script>
    $(document).ready(function () {
        $("input[type='text'], input[type='number'], textarea").on("input", function () {
            let unsafePattern = /<script.*?>.*?<\/script>|<iframe.*?>.*?<\/iframe>|<.*?on\w+=".*?".*?>|<style.*?>.*?<\/style>/gi;
            let htmlPattern = /<[^>]*>/gi; // Detects any HTML tags
            let inputValue = $(this).val();

            if (unsafePattern.test(inputValue)) {
                alert("Malicious content detected! Clearing the textarea.");
                $(this).val(''); // Clear the textarea
            }

            if (htmlPattern.test(inputValue)) {
                alert("HTML tags are not allowed! Clearing input.");
                $(this).val('');  // Clear the input field
            }
        });
    });

    $(document).ready(function () {
        $("input[type='text'], input[type='number'], textarea").on("paste", function (event) {
            let pastedText = (event.originalEvent || event).clipboardData.getData("text");
            let unsafePattern = /<script.*?>.*?<\/script>|<iframe.*?>.*?<\/iframe>|<.*?on\w+=".*?".*?>|<style.*?>.*?<\/style>/gi;
            let htmlPattern = /<[^>]*>/gi; // Detects any HTML tags

            if (unsafePattern.test(pastedText)) {
                alert("Malicious content detected! Clearing the input.");
                $(this).val(''); // Clear the textarea
            }

            if (htmlPattern.test(pastedText)) {
                alert("HTML tags are not allowed! Clearing input.");
                $(this).val('');  // Clear the input field
            }
        });
    });

    const allowedExtensions = ["jpg", "jpeg", "png"];
  const maxFileSize = 5 * 1024 * 1024; // 5MB

  $('#gall_img').on('change', function () {
    const file = this.files[0];
    currImgInd = $(this).data('index');
    selImgId = $(this).attr('id')
    if (file) {
      const fileExt = file.name.split(".").pop().toLowerCase();
      const mimeType = file.type;

      // Validate File Type
      if (!allowedExtensions.includes(fileExt) || !mimeType.startsWith("image/")) {
        $(this).val('');
        alert("Invalid file type. Only images (JPG, PNG, JPEG) are allowed.");
        return;
      }
      // Validate File Size
      if (file.size > maxFileSize) {
        $(this).val('');
        alert("File size exceeds the 5MB limit.");
        return;
      }}
    })
    const allowedExtensions_fordoc = ["pdf"];
    $('#document_id').on('change', function () {
    const file = this.files[0];
    currImgInd = $(this).data('index');
    selImgId = $(this).attr('id')
    if (file) {
      const fileExt = file.name.split(".").pop().toLowerCase();
      const mimeType = file.type;

      // Validate File Type
      if (!allowedExtensions_fordoc.includes(fileExt) ) {
        $(this).val('');
        alert("Invalid file type. Only PDF are allowed.");
        return;
      }
      // Validate File Size
      if (file.size > maxFileSize) {
        $(this).val('');
        alert("File size exceeds the 5MB limit.");
        return;
      }}
    })

 
</script>

